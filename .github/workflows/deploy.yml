# deploy.yml

# è‡ªåŠ¨åŒ–æµç¨‹çš„åç§°
name: Deploy Vue App to GitHub Pages

# è§¦å‘æ¡ä»¶ï¼šå½“ä»£ç è¢« push åˆ° main åˆ†æ”¯æ—¶
on:
  push:
    branches:
      - main

# ä»»åŠ¡
jobs:
  build-and-deploy:
    # ã€æ–°å¢ã€‘ä¸ºæœ¬æ¬¡ä»»åŠ¡æˆäºˆæƒé™
    permissions:
      contents: write # å…è®¸å‘ä»“åº“çš„ contents (åŒ…æ‹¬åˆ†æ”¯) è¿›è¡Œå†™å…¥æ“ä½œ

    # è¿è¡Œç¯å¢ƒï¼šä½¿ç”¨æœ€æ–°çš„ Ubuntu
    runs-on: ubuntu-latest

    steps:
      # ç¬¬ä¸€æ­¥ï¼šæ£€å‡ºï¼ˆä¸‹è½½ï¼‰ä½ çš„ä»“åº“ä»£ç 
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      # ç¬¬äºŒæ­¥ï¼šè®¾ç½® Node.js ç¯å¢ƒ
      - name: Set up Node.js ğŸŸ©
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      # ç¬¬ä¸‰æ­¥ï¼šå®‰è£…é¡¹ç›®ä¾èµ–
      - name: Install dependencies ğŸ‘¨â€ğŸ’»
        run: npm install

      # ç¬¬å››æ­¥ï¼šæ„å»ºç”Ÿäº§ç‰ˆæœ¬çš„åº”ç”¨
      - name: Build ğŸ—ï¸
        env:
          CI: false
        run: npm run build

      # ç¬¬äº”æ­¥ï¼šå°†æ„å»ºå¥½çš„æ–‡ä»¶ï¼ˆdist ç›®å½•ï¼‰éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯
      - name: Deploy ğŸš€
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist